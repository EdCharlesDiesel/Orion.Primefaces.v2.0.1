<div class="cart-container" *ngIf="vm$ | async as vm">
  <!-- Header -->
  <div class="cart-header">
    <h2>
      <mat-icon>shopping_cart</mat-icon>
      Shopping Cart
    </h2>
    <button
      mat-stroked-button
      color="warn"
      (click)="clearCart()"
      *ngIf="vm.items.length > 0">
      <mat-icon>delete_sweep</mat-icon>
      Clear Cart
    </button>
  </div>

  <mat-divider></mat-divider>

  <!-- Cart Items -->
  <div class="cart-items" *ngIf="vm.items.length > 0">
    <app-cart-item
      *ngFor="let item of vm.items; trackBy: trackByProductId"
      [cartItem]="item">
    </app-cart-item>
  </div>

  <!-- Empty Cart -->
  <div class="empty-cart" *ngIf="vm.items.length === 0">
    <mat-icon>shopping_cart</mat-icon>
    <h3>Your cart is empty</h3>
    <p>Add some products to get started!</p>
    <button mat-raised-button color="primary" routerLink="/products-all">
      Browse Products
    </button>
  </div>

  <!-- Cart Summary -->
  <mat-card class="cart-summary" *ngIf="vm.items.length > 0">
    <mat-card-content>
      <div class="summary-row">
        <span>Total Items:</span>
        <strong>{{ vm.totalItems }}</strong>
      </div>
      <mat-divider></mat-divider>
      <div class="summary-row total">
        <span>Total Price:</span>
        <strong class="total-amount">{{ vm.totalPrice | currency }}</strong>
      </div>
      <button
        mat-raised-button
        color="primary"
        class="checkout-button"
        (click)="checkout()">
        <mat-icon>payment</mat-icon>
        Proceed to Checkout
      </button>
    </mat-card-content>
  </mat-card>
</div>
